function RadarChart(a,b,c){function d(a,b){a.each(function(){for(var a,c=d3.select(this),d=c.text().split(/\s+/).reverse(),e=[],f=0,g=1.4,h=c.attr("y"),i=c.attr("x"),j=parseFloat(c.attr("dy")),k=c.text(null).append("tspan").attr("x",i).attr("y",h).attr("dy",j+"em");a=d.pop();)e.push(a),k.text(e.join(" ")),k.node().getComputedTextLength()>b&&(e.pop(),k.text(e.join(" ")),e=[a],k=c.append("tspan").attr("x",i).attr("y",h).attr("dy",++f*g+j+"em").text(a))})}var e={w:600,h:600,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:0,labelFactor:1.25,wrapWidth:60,opacityArea:.35,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:!1,color:d3.scale.category10()};if("undefined"!=typeof c)for(var f in c)"undefined"!=typeof c[f]&&(e[f]=c[f]);var g,h,i,j,k,l,m,n=Math.max(e.maxValue,d3.max(b,function(a){return d3.max(a.map(function(a){return a.value}))})),o=b[0].map(function(a,b){return{nombre:a.axis,descripcion:a.description}}),p=o.length,q=Math.min(e.w/2,e.h/2),r=(d3.format("%"),2*Math.PI/p),s=d3.scale.linear().range([0,q]).domain([0,n]);if(d3.select(a).select("svg").empty()){g=d3.select(a).append("svg").attr("class","radar"+a),h=g.append("g").attr("class","mainGroup"),i=h.append("g").attr("class","axisWrapper");var t,u=h.append("defs").append("filter").attr("id","glow"),v=(u.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),u.append("feMerge"));v.append("feMergeNode").attr("in","coloredBlur"),v.append("feMergeNode").attr("in","SourceGraphic");i.selectAll(".levels").data(d3.range(1,e.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(a,b){return q/e.levels*a}).style("fill","#CDCDCD").style("stroke","#CDCDCD").style("fill-opacity",e.opacityCircles).style("filter","url(#glow)"),i.selectAll(".axisLabel").data(d3.range(1,e.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(a){return-a*q/e.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(function(a,b){return n*a/e.levels}),j=i.selectAll(".axis").data(o).enter().append("g").attr("id",function(a,b){return"axis-"+b}).attr("class","axis"),j.append("line").attr("x1",0).attr("y1",0).attr("x2",function(a,b){return s(1.1*n)*Math.cos(r*b-Math.PI/2)}).attr("y2",function(a,b){return s(1.1*n)*Math.sin(r*b-Math.PI/2)}).attr("class","line").style("stroke","white").style("stroke-width","2px"),j.append("text").attr("class","legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(a,b){return s(n*e.labelFactor)*Math.cos(r*b-Math.PI/2)}).attr("y",function(a,b){return s(n*e.labelFactor)*Math.sin(r*b-Math.PI/2)}).text(function(a){return a.nombre}).on("mouseover",function(a,b){t.style("left",d3.event.pageX-100+"px").style("top",d3.event.pageY+20+"px").style("background-color","#aaa").style("width","200px").html(a.descripcion).style("opacity",1),d3.selectAll("g.axis").select("text").style("font-weight","normal"),d3.selectAll("g#axis-"+b).select("text").style("font-weight","bold")}).on("mouseout",function(){d3.selectAll("g.axis").select("text").style("font-weight","normal"),t.style("left","0px").style("top","0px").style("opacity",0)}).call(d,e.wrapWidth)}else g=d3.select(a).select("svg"),h=g.select("g.mainGroup"),i=h.select("g.axisWrapper");g.attr("width",e.w+e.margin.left+e.margin.right).attr("height",e.h+e.margin.top+e.margin.bottom),h.attr("transform","translate("+(e.w/2+e.margin.left)+","+(e.h/2+e.margin.top)+")"),k=d3.svg.line.radial().interpolate("linear-closed").radius(function(a){return s(a.value)}).angle(function(a,b){return b*r}),e.roundStrokes&&k.interpolate("cardinal-closed"),l=h.selectAll(".radarWrapper").data(b),l.enter().append("g").attr("class","radarWrapper").each(function(){d3.select(this).append("path").attr("class","radarArea").on("mouseover",function(a,b){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1),d3.select(this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",e.opacityArea)}),d3.select(this).append("path").attr("class","radarStroke")}),l.select("path.radarArea").style("fill",function(a,b){return e.color(b)}).style("fill-opacity",e.opacityArea).transition().attr("d",function(a,b){return k(a)}),l.select("path.radarStroke").style("stroke-width",e.strokeWidth+"px").style("stroke",function(a,b){return e.color(b)}).style("fill","none").style("filter","url(#glow)").transition().attr("d",function(a,b){return k(a)});var w=l.selectAll(".radarCircle").data(function(a,b){return a});w.enter().append("circle").attr("class","radarCircle").attr("r",e.dotRadius),w.style("fill",function(a,b,c){return e.color(c)}).style("fill-opacity",.8).transition().attr("cx",function(a,b){return s(a.value)*Math.cos(r*b-Math.PI/2)}).attr("cy",function(a,b){return s(a.value)*Math.sin(r*b-Math.PI/2)}),m=h.selectAll(".radarCircleWrapper").data(b),m.enter().append("g").attr("class","radarCircleWrapper");var x=m.selectAll(".radarInvisibleCircle").data(function(a,b){return a});x.enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*e.dotRadius).style("pointer-events","all").style("fill","transparent").on("mouseover",function(a,b){t.style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY+10+"px").style("width","100px").style("background-color",e.color(a.ix)).html(a.nombre+" "+a.value.toFixed(2)).style("opacity",1),d3.selectAll("g.axis").select("text").style("font-weight","normal"),d3.selectAll("g#axis-"+b).select("text").style("font-weight","bold")}).on("mouseout",function(){d3.selectAll("g.axis").select("text").style("font-weight","normal"),t.style("left","0px").style("top","0px").style("opacity",0)}),x.attr("cx",function(a,b){return s(a.value)*Math.cos(r*b-Math.PI/2)}).attr("cy",function(a,b){return s(a.value)*Math.sin(r*b-Math.PI/2)});var t=d3.select("body").append("div").attr("id","tooltip").style("opacity",0)}var REGIONES_TOPOJSON={type:"Topology",transform:{scale:[.0009293692125560269,.003847579048065936],translate:[-75.710319519043,-55.97949600219725]},objects:{regiones:{type:"GeometryCollection",geometries:[{type:"MultiPolygon",arcs:[[[0,1,2,3]]],id:2,properties:{id:2,Region:"Antofagasta",Details:"Región de Antofagasta (II)"}},{type:"Polygon",arcs:[[4,5,6,7]],id:9,properties:{id:9,Region:"Araucanía",Details:"Región de La Araucanía (IX)"}},{type:"MultiPolygon",arcs:[[[8,9,-1,10]]],id:3,properties:{id:3,Region:"Atacama",Details:"Región de Atacama (III)"}},{type:"MultiPolygon",arcs:[[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38,39,40,41]]],id:11,properties:{id:11,Region:"Aisén del Gen D. C.",Details:"Región Aisén del General Carlos IIbáñez del Campo (XI)"}},{type:"MultiPolygon",arcs:[[[42,-8,43,44]]],id:8,properties:{id:8,Region:"Bio-Bio",Details:"Región del Bio-Bio (VIII)"}},{type:"MultiPolygon",arcs:[[[45,46,47,-9]]],id:4,properties:{id:4,Region:"Coquimbo",Details:"Región de Coquimbo (IV)"}},{type:"Polygon",arcs:[[48,49,50,51,52]],id:6,properties:{id:6,Region:"Libertador",Details:"Región del Libertador General Bernardo O´Higgins (VI)"}},{type:"MultiPolygon",arcs:[[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[76]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[88]],[[89]],[[90]],[[91,92,-40,93]],[[94]],[[95]]],id:12,properties:{id:12,Region:"Magallanes",Details:"Región de Magallanes y de la Antártica Chilena (XII)"}},{type:"Polygon",arcs:[[96,-45,97,-50]],id:7,properties:{id:7,Region:"Maule",Details:"Región del Maule (VII)"}},{type:"Polygon",arcs:[[98,-53,99]],id:13,properties:{id:13,Region:"Metropolitana",Details:"Región Metropolitana (Santiago) (XIII)"}},{type:"Polygon",arcs:[[100,-100,-52,101,-47]],id:5,properties:{id:5,Region:"Valparaiso",Details:"Región de Valparaiso (V)"}},{type:"Polygon",arcs:[[102,-3,103,104]],id:1,properties:{id:1,Region:"Tarapacá",Details:"Región de Tarapacá (I)"}},{type:"Polygon",arcs:[[-105,105]],id:15,properties:{id:15,Region:"Arica y Parinacota",Details:"Región de Arica y Parinacota (XV)"}},{type:"Polygon",arcs:[[106,107,108,-6]],id:14,properties:{id:14,Region:"Los Ríos",Details:"Región de Los Rïos (XIV)"}},{type:"MultiPolygon",arcs:[[[109]],[[110]],[[111,-42,112,-108]]],id:10,properties:{id:10,Region:"Los Lagos",Details:"Región de Los Lagos (X)"}}]}},arcs:[[[7686,7982],[-268,-30],[-192,-1],[-73,-66],[-297,-10],[-268,13],[-419,-32],[-93,9],[-255,-29],[-115,13],[-242,-55]],[[5464,7794],[-107,55],[112,70],[183,35],[-23,106],[-109,66],[85,144],[-15,77],[133,65],[-209,51],[8,87],[183,-1],[130,46],[-27,28],[81,81],[96,223],[92,54]],[[6077,8981],[510,8],[256,-42],[203,62],[430,26],[239,83]],[[7715,9118],[149,-11],[246,-93],[-4,-79],[129,-45],[-8,-52],[108,-19],[19,-71],[106,-59],[-26,-73],[323,-18],[423,24],[204,-49],[-333,-251],[-46,-20],[-1013,-99],[-130,-17],[-188,-87],[244,-72],[-253,-28],[21,-17]],[[5061,4645],[4,-79],[184,-38],[-124,-49],[-124,1],[-387,-47],[37,-77],[-130,-107],[-177,15]],[[4344,4264],[-131,31],[-159,-60],[-208,-18],[-271,8],[-639,52],[79,33],[-150,11],[-166,-23]],[[2699,4298],[-96,97],[-213,107],[-38,52]],[[2352,4554],[375,-3],[-150,47],[252,56],[-166,-4],[184,79],[24,45],[278,14],[264,-13],[24,-33],[458,-58],[441,-26],[145,-58],[264,60],[316,-15]],[[6269,6837],[-239,-12],[-307,31],[-149,62],[-4,79],[-461,-11],[-171,-47],[-107,28],[-294,-1]],[[4537,6966],[-31,67],[254,75],[-35,17],[165,55],[-18,67],[126,88],[172,36],[-69,117],[128,15],[22,59],[155,82],[58,150]],[[7686,7982],[-19,-46],[111,-71],[98,-123],[-193,-30],[-19,-53],[303,-100],[-21,-38],[-511,-18],[-197,-90],[-138,-113],[-184,-64],[-377,-60],[-145,-197],[-181,-21],[-78,-39],[134,-82]],[[403,1899],[75,-15],[-351,-23],[276,38]],[[317,1960],[135,-48],[-238,-25],[-165,59],[268,14]],[[1323,1970],[215,-23],[-134,-18],[-81,41]],[[1499,1996],[43,-49],[-229,33],[186,16]],[[1063,2036],[119,-48],[10,-99],[-439,29],[210,52],[100,66]],[[1241,2040],[214,-37],[-183,-22],[-31,59]],[[499,2051],[485,-26],[-37,-52],[-212,-22],[-236,100]],[[393,2054],[292,-108],[22,-31],[-197,-28],[-125,80],[-136,-10],[-119,88],[263,9]],[[782,2094],[195,-33],[-97,-19],[-262,14],[164,38]],[[917,2121],[34,-50],[-175,14],[141,36]],[[1630,2124],[412,-34],[-541,-10],[-199,18],[328,26]],[[2157,2645],[53,-73],[-89,-34],[-205,32],[65,60],[176,15]],[[1856,2708],[102,-40],[-162,-2],[60,42]],[[1430,2734],[209,-42],[-295,-42],[86,84]],[[2228,2737],[87,-6],[-78,-79],[-185,32],[176,53]],[[1817,2742],[259,-11],[-71,-27],[-188,38]],[[1428,2779],[122,-32],[-270,21],[148,11]],[[1811,2798],[233,-9],[34,-30],[-339,7],[72,32]],[[1422,2812],[216,-21],[-38,-31],[-178,52]],[[2054,2854],[127,-42],[-327,-24],[-251,22],[50,34],[401,10]],[[1692,2887],[258,-24],[-514,-12],[256,36]],[[1723,2958],[281,-27],[-425,-28],[-178,45],[322,10]],[[2198,2971],[102,-40],[-191,-12],[-149,39],[238,13]],[[1541,3009],[72,-17],[-342,-16],[32,26],[238,7]],[[2920,3016],[320,-40],[-113,-38],[-348,-62],[-288,26],[-13,62],[205,-13],[-30,51],[267,14]],[[1811,3078],[173,-26],[-214,-17],[41,43]],[[2035,3166],[-133,-41],[-201,17],[334,24]],[[4233,3090],[-10,-82],[398,2],[270,-14],[40,-33],[-234,-60],[-133,19],[-396,-16],[-220,13],[-26,-34],[543,-26],[283,-83],[-224,-26],[6,-32],[-278,-11],[29,-75],[144,-29],[-308,-46],[129,-22],[127,-119],[-308,-34],[57,-112],[-288,-43],[-180,-4],[9,-44],[-225,-78],[195,-47],[35,-74],[-319,-31],[34,-86],[-389,-36],[-262,-71]],[[2732,1756],[-231,3],[-356,81],[-376,39]],[[1769,1879],[-230,3],[-128,34],[223,31],[163,-13],[171,28],[-419,21],[-414,86],[146,19],[231,-32],[214,21],[677,-50],[-179,45],[77,47],[-379,-5],[-119,15],[-507,0],[-242,23],[687,183],[-193,60],[-397,-10],[299,-19],[-339,-2],[-322,31],[-91,49],[-512,-29],[253,-43],[-267,-24],[-140,37],[56,60],[611,90],[139,-3],[263,61],[-240,-31],[-200,60],[435,18],[250,-13],[370,15],[178,-70],[226,-41],[-235,-84],[126,-9],[469,150],[-298,-81],[42,90],[299,90],[-211,-39],[69,83],[214,39],[446,-39],[-341,60],[-245,-10],[158,34],[-85,49],[280,2],[376,53],[81,65],[-333,55],[-315,26],[359,110]],[[2976,3175],[230,30],[36,-39],[291,-10],[200,25],[37,-33],[232,-13],[231,-45]],[[5061,5073],[-117,-53],[-30,-141],[-70,-20],[97,-52],[-91,-52],[211,-110]],[[2352,4554],[80,88],[-247,128],[84,23],[-88,45],[41,43],[391,-9],[147,44],[-56,73],[217,13],[6,42],[191,77],[38,81]],[[3156,5202],[695,-34],[757,-56],[162,-30],[258,29],[33,-38]],[[6269,6837],[23,-43],[-83,-65],[143,-25],[-169,-54],[-141,1],[-227,-130],[41,-35],[-128,-37],[-128,5],[-52,-107],[122,-75],[251,-28],[-189,-28],[76,-44]],[[5808,6172],[-365,49],[-564,15],[-380,-24]],[[4499,6212],[-46,150],[-98,81],[-58,153],[95,95],[120,-14],[132,27],[4,49],[122,19],[-71,44],[62,36],[-58,74],[-166,40]],[[6116,5619],[-310,-101],[-44,-65]],[[5762,5453],[-145,22],[-151,-14],[-354,54],[-303,3],[-164,-39],[-378,-3],[-345,55]],[[3922,5531],[94,91],[-36,58],[198,61]],[[4178,5741],[137,-22]],[[4315,5719],[104,-22],[288,-2],[226,-36],[135,54],[468,47],[149,-63],[133,1],[298,-79]],[[9018,104],[90,-55],[-309,29],[219,26]],[[7767,273],[193,-26],[-299,-34],[-472,34],[303,-39],[425,-2],[-18,-34],[265,-24],[168,-55],[-411,39],[-666,13],[192,60],[-204,-23],[-477,8],[301,-68],[-292,13],[-647,76],[116,23],[630,21],[893,18]],[[8192,278],[981,-12],[157,-48],[-188,-44],[-1016,31],[66,73]],[[5756,283],[84,-36],[-198,-47],[-59,31],[-413,0],[-82,34],[373,-8],[295,26]],[[6504,289],[565,-27],[-744,-20],[-81,42],[260,5]],[[4803,296],[302,-5],[-88,-26],[-398,22],[184,9]],[[3681,495],[-15,-47],[-191,18],[206,29]],[[4472,528],[319,-17],[54,-45],[234,24],[25,-47],[-150,-34],[-619,68],[137,51]],[[4098,552],[317,-62],[-141,-45],[-241,-16],[-295,66],[-20,39],[234,-10],[146,28]],[[5622,628],[153,-123],[-358,31],[195,-88],[-373,34],[-54,60],[437,86]],[[2860,674],[138,-13],[57,-65],[85,57],[383,-62],[329,-28],[-193,-53],[-670,-28],[112,77],[-509,-43],[6,70],[-346,-8],[101,39],[227,8],[-115,32],[287,-11],[108,28]],[[1123,841],[529,-65],[120,10],[438,-44],[136,-36],[92,31],[362,-54],[-548,5],[1,26],[-283,39],[-476,-11],[-461,92],[90,7]],[[3832,862],[432,-8],[273,13],[-12,-51],[-438,-42],[-138,-36],[-374,15],[28,-40],[-182,-7],[158,-70],[-167,-8],[-306,49],[-468,50],[551,0],[-194,15],[-95,68],[436,26],[-2,-26],[498,52]],[[6816,907],[267,-56],[354,27],[209,-18],[-8,-579],[-504,-16],[-648,39],[-657,-13],[-301,21],[-145,-18],[-317,58],[-301,-14],[-745,18],[-16,37],[324,-2],[405,25],[363,-20],[162,47],[-100,39],[761,-55],[158,21],[369,-65],[-146,57],[429,-16],[260,-28],[222,8],[-1116,83],[-102,94],[458,24],[426,41],[-64,36],[-624,-10],[-265,-23],[-257,26],[17,94],[321,5],[-234,67],[229,3],[251,-29],[223,24],[88,52],[254,16]],[[2142,920],[-29,-55],[-182,-26],[-195,29],[406,52]],[[1790,998],[265,-60],[-333,47],[68,13]],[[1568,1003],[346,-63],[-288,-13],[-58,76]],[[1808,1053],[288,-42],[75,-44],[-451,60],[88,26]],[[3036,1058],[-241,-50],[74,42],[167,8]],[[1054,1076],[-1,-62],[-195,-16],[196,78]],[[1374,1102],[384,-39],[-46,-24],[-261,19],[-77,44]],[[936,1128],[89,-44],[-138,-71],[-206,21],[-60,47],[164,26],[113,-39],[38,60]],[[1786,1151],[81,-70],[-303,23],[222,47]],[[639,1221],[138,-15],[-232,-78],[-26,74],[120,19]],[[959,1173],[-226,-6],[246,70],[216,4],[-236,-68]],[[1339,1289],[75,-51],[-215,36],[140,15]],[[1479,1316],[172,-78],[-102,-3],[-70,81]],[[1063,1318],[46,43],[283,-20],[-63,-46],[-213,-31],[-307,31],[254,23]],[[1063,1318],[-221,8],[39,52],[173,-8],[9,-52]],[[332,1433],[366,-11],[-245,-77],[-257,35],[136,53]],[[1304,1435],[150,-2],[217,-81],[-206,-18],[-269,55],[196,23],[-88,23]],[[1110,1459],[150,-13],[-270,-21],[120,34]],[[336,1457],[1,86],[281,3],[119,-42],[210,-11],[-528,-54],[-83,18]],[[287,1655],[97,2],[217,-76],[-204,30],[-241,-19],[-23,49],[154,14]],[[705,1801],[214,-16],[-39,-49],[-363,38],[188,27]],[[364,1798],[118,-13],[-242,-44],[-170,15],[294,42]],[[219,1855],[256,-10],[-215,-50],[-200,45],[159,15]],[[501,1863],[164,-15],[-74,-39],[-90,54]],[[4076,714],[173,-55],[32,60],[356,19],[299,62],[-271,26],[-197,62],[-626,13],[-463,-21],[174,26],[-502,-31],[207,-15],[-402,-47],[104,-47],[-278,-19],[-246,26],[191,16],[-285,26],[292,11],[-121,39],[-215,0],[-60,109],[178,21],[126,-28],[109,34],[404,41],[356,-65],[-405,-62],[304,8],[169,56],[-199,66],[228,10],[-100,49],[-122,-29],[-333,14],[-357,52],[274,-63],[-252,-91],[-318,37],[-84,52],[282,-49],[-189,67],[-159,-10],[-228,57],[11,54],[177,-17],[-39,59],[-383,11],[-96,67],[213,16],[-289,97],[270,-5],[-350,31]],[[1436,1454],[-348,47],[371,51],[48,98],[232,23],[-344,38],[38,124],[-66,29],[402,15]],[[2732,1756],[40,-23],[-326,0],[-150,-63],[167,-65],[-134,-34],[17,-57],[217,-29],[189,-131],[456,40],[483,-13],[32,-94],[-164,-24],[147,-28],[-103,-70],[88,-55],[348,-42],[38,-34],[2050,0],[608,-41],[267,2],[656,-52],[-658,39],[-262,-16],[-127,-56],[-307,-3],[-745,-63],[-200,-3],[-129,-46],[-145,-120],[80,-66],[-92,-46],[-324,-24],[-859,53],[-408,78],[172,39],[422,5]],[[1063,1895],[241,-21],[89,-141],[-90,-57],[119,-42],[-13,-55],[-233,-40],[-259,6],[-23,128],[-155,-45],[22,-52],[-129,11],[-122,78],[-256,52],[113,26],[392,0],[128,-20],[105,64],[-301,66],[372,42]],[[720,1887],[-68,-36],[-164,20],[232,16]],[[5762,5453],[-3,-36],[-205,-19],[120,-30],[117,-129],[-99,-21],[-17,-70],[-153,10],[-127,-30],[-5,-42],[-329,-13]],[[3156,5202],[232,52],[-83,43],[267,98],[213,35],[12,49],[125,52]],[[6047,5963],[75,-75],[152,26],[136,-58],[-94,-13],[-57,-79],[82,-108],[-225,-37]],[[4315,5719],[296,65],[61,59],[-94,35],[270,49],[193,65],[291,11],[169,-11],[307,-55],[239,26]],[[5808,6172],[184,-65],[35,-83],[117,-24],[-97,-37]],[[4178,5741],[243,91],[-116,29],[59,32],[-110,55],[190,18],[99,130],[83,32],[-144,55],[17,29]],[[7271,9625],[361,-84],[223,-33],[-304,-90],[175,-26],[-33,-52],[-236,-10],[126,-63],[-78,-31],[311,-52],[-111,-22],[10,-44]],[[6077,8981],[-156,160],[25,118],[66,94],[-82,125],[-92,53],[0,50]],[[5838,9581],[227,34],[431,39],[159,-3],[176,-33],[440,7]],[[5838,9581],[-82,83],[59,94],[-72,23],[469,28],[205,78],[-53,76],[143,-3],[215,39],[127,-55],[51,-60],[218,-22],[153,-237]],[[4344,4264],[-17,-70],[107,-16],[-261,-83],[191,-37],[-174,-16],[-24,-44]],[[4166,3998],[-767,-26],[-264,16],[-345,95],[-560,7],[-54,17]],[[2176,4107],[-28,44],[271,40],[280,107]],[[1114,3229],[132,-21],[-231,-14],[-74,32],[173,3]],[[1947,3690],[-51,-23],[296,18],[205,-8],[-64,-26],[131,-36],[70,-70],[-342,-16],[93,-34],[-213,-23],[325,-48],[-154,-23],[159,-58],[-305,-10],[102,-42],[-144,-26],[-535,23],[-129,25],[262,86],[47,62],[-77,36],[32,68],[117,29],[65,97],[110,-1]],[[4166,3998],[-115,-39],[93,-44],[39,-172],[-76,-19],[140,-57],[37,-65],[-323,-5],[-104,-43],[101,-51],[-109,-26],[-5,-100],[88,-33],[339,-16],[-208,-73],[364,-48],[-165,-41],[102,-39],[-131,-37]],[[2976,3175],[40,41],[-202,42],[238,55],[27,54],[151,21],[-140,27],[38,85],[283,-21],[-311,76],[250,28],[215,-78],[-74,91],[39,42],[-282,-13],[-203,31],[272,52],[-213,56],[-293,-27],[62,-27],[-475,-25],[-274,16],[-220,200],[237,112],[-64,19],[99,75]]]};angular.module("ecosistemaEmprendedorRegionesApp",["ngAnimate","ngRoute","ngSanitize","ngTouch","ui.select"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/details",{templateUrl:"views/details.html",controller:"DetailsCtrl",controllerAs:"details",reloadOnSearch:!1}).when("/compare",{templateUrl:"views/compare.html",controller:"CompareCtrl",controllerAs:"compare",reloadOnSearch:!1}).otherwise({redirectTo:"/"}),b.hashPrefix("")}]).service("ColorService",function(){this.getThresholdScale=function(a,b){var c=(b-a)/10;return d3.scale.threshold().range(["#001d34","#2f2934","#4e3633","#6d4331","#8c502e","#ac5e29","#cc6c21","#ec7b13","#ff932e","#ffb365"]).domain([a+1*c,a+2*c,a+3*c,a+4*c,a+5*c,a+6*c,a+7*c,a+8*c,a+9*c,a+10*c])},this.paintMap=function(a){angular.forEach(a,function(a){d3.select("path#region-"+a.id).transition().duration(1e3).style("fill",a.color)})},this.selectRegion=function(a,b){d3.selectAll("path.region").transition().duration(1e3).style("fill",function(c){return c.id==a?"#ff8303":b&&c.id==b?"#001D34":"#ddd"})}}).service("TabletopService",["$q",function(a){this.data=!1,this.loading=!1,this.getData=function(){var b=this;return a(function(a,c){b.data?a(angular.copy(b.data)):Tabletop.init({key:"1mB7Mes_YsCRTKNEvVTxQMDXtN17BGakWOxlx7MlRPWM",callback:function(c,d){b.data=c,a(angular.copy(b.data))},simpleSheet:!1,parseNumbers:!1,postProcess:function(a){var b=["region"];return angular.forEach(a,function(c,d){b.indexOf(d)>-1?a[d]=parseInt(c.replace(/\./g,"")):a[d]=parseFloat((c+"").replace(/\,/g,"."))}),a}})})}}]).run(["TabletopService","$rootScope","ColorService","$location","$routeParams","$timeout",function(a,b,c,d,e,f){function g(a){b.fulldata=a,b.years=_.keys(b.fulldata),b.years=b.years.map(function(a){return parseInt(a)}).sort().reverse(),b.years=b.years.map(function(a){return{id:a,label:a}}),b.selectedYear={value:b.years[0]},b.views=[{id:"main",label:"País"},{id:"details",label:"Región"},{id:"compare",label:"Comparar"}];var c=""==d.path().replace("/","")?"main":d.path().replace("/","");b.selectedView={value:_.find(b.views,["id",c])},b.yearChanged(),b.regionChanged(),b.vsRegionChanged(),b.loading=!1}function h(){var a=b.map.container.node().getBoundingClientRect(),c=a.width,d=600;b.map.svg=b.map.container.append("svg").attr("width",c).attr("height",d);var e=REGIONES_TOPOJSON,f=d3.geo.mercator().scale(650).translate([c/2,d/2]).precision(.1).center([-70,-39]),g=(b.map.svg.append("rect").attr("class","svg-back").style("fill","#fff").style("opacity",1).attr("x",0).attr("y",0).attr("width",c).attr("height",d).on("click",function(a){}),b.map.svg.append("g").attr("class","paths-group"));g.selectAll(".region").data(topojson.feature(e,e.objects.regiones).features).enter().append("path").attr("class",function(a){return"region"}).attr("id",function(a){return"region-"+a.id}).attr("d",d3.geo.path().projection(f)).style("fill",function(a){return"#ddd"}).on("click",function(a){switch(b.selectedView.value.id){case"main":b.goToDetail(a.id);break;case"details":b.$apply(function(){b.selectedRegion={value:_.find(b.regions_options,["id",a.id+""])}}),b.regionChanged();break;case"compare":b.$apply(function(){b.selectedVsRegion={value:_.find(b.regions_options,["id",a.id+""])},b.vsRegionChanged()})}})}b.loading=!0,b.map={container:d3.select("#mapa"),svg:null},b.dimension_labels={general:"Índice general",n_opp:"Percepción oportunidades",n_start:"Habilidades emprendimiento",n_risk:"Tolerancia al fracaso",n_network:"Calidad de redes de trabajo",n_cultsupp:"Aceptación cultural al emprendimiento",n_oppstart:"Facilidad para iniciar negocios",n_techno:"Absorbción tecnológica",n_hc:"Calidad de los recursos humanos",n_compet:"Nivel de competencia",n_pinnov:"Desarrollo de nuevos productos",n_procinn:"Desarrollo de nuevas tecnologías",n_hgrow:"Creación de empresas de alto crecimiento",n_global:"Internacionalización",n_finance:"Financiamiento disponible"},b.dimension_descriptions={general:"Índice general construído en base a todos los índices relevados.",n_opp:"Emprendimiento por oportunidad ponderado por la percepción de barreras a nuevas oportunidades de emprendimiento en la región.",n_start:"Percepción de habilidad individual para emprender, ponderado por la calidad de recursos humanos disponibles en la región.",n_risk:"Percepción de posibilidad de fracaso, ponderado por el riesgo de negocios en la región.",n_network:"Capacidad de movilizar recursos y aprovechar oportunidades entre redes de trabajo, ponderado por la conectividad de la región.",n_cultsupp:"Soporte cultural al emprendimiento ponderado por la cohesión para apoyar el emprendimiento.",n_oppstart:"Proporción de emprendedores oportunistas, ponderado por la percepción de corrupción regional.",n_techno:"Proporción de emprendedores que adoptaron tecnologías, ponderado por la conectividad digital de la región.",n_hc:"Proporción de emprendedores con al menos educación secundaria, ponderado por la productividad laboral de la región.",n_compet:"Intensidad de competencia entre emprendedores del mismo producto, ponderado por una medida de rigideces laborales de la región.",n_pinnov:"Potencial de los emprendedores a irrumpir en un mercado con un producto nuevo, ponderado por una medida regional de innovación.",n_procinn:"Potencial de los emprendedores para irrumpir en un mercado con un proceso productivo nuevo, ponderado por una medida regional de innovación.",n_hgrow:"Potencial de crecimiento futuro ponderado por el nivel de sofisticación del mercado.",n_global:"Tendencia de los emprendedores a exportar sus productos, ponderado por la exposición al exterior que tiene la región.",n_finance:"Medida del financiamiento (informal) disponible, ponderado por la infraestructura financiera regional."},b.dimension_options=[],angular.forEach(b.dimension_labels,function(a,c){return b.dimension_options.push({id:c,label:a})}),b.selectedDimension={value:b.dimension_options[0]},b.regions={1:"Tarapacá",2:"Antofagasta",3:"Atacama",4:"Coquimbo",5:"Valparaíso",6:"O'Higgins",7:"Maule",8:"Bío-Bío",9:"La Araucanía",10:"Los Lagos",11:"Aysén",12:"Magallanes",13:"Metropolitana de Santiago",14:"Los Ríos",15:"Arica y Parinacota"},b.regions_options=[],angular.forEach(b.regions,function(a,c){return b.regions_options.push({id:c,label:a})}),b.selectedRegion={value:b.regions_options[0]},b.selectedVsRegion={value:b.regions_options[1]};var i=new pym.Child({polling:500});i.sendHeight(),f(function(){},1e3),b.viewChanged=function(){switch(b.selectedView.value.id){case"main":window.location="#/home";break;case"details":b.goToDetail(1);break;case"compare":b.goToCompare(1,2)}},b.regionChanged=function(){b.currentRegion=_.find(b.data,["region",parseInt(b.selectedRegion.value.id)]),b.$broadcast("regionChanged",{id:b.selectedRegion.value.id})},b.vsRegionChanged=function(){b.vsRegion=_.find(b.data,["region",parseInt(b.selectedVsRegion.value.id)]),b.$broadcast("vsRegionChanged",{id:b.selectedVsRegion.value.id})},b.yearChanged=function(){b.data=b.fulldata[b.selectedYear.value.id].elements.sort(function(a,b){return a.general<b.general?1:-1}).map(function(a,c){return a.ranking=c+1,a.nombre=b.regions[a.region],a}),b.$broadcast("newData")},b.dimensionChanged=function(){b.$broadcast("dimensionChanged",{dim:b.selectedDimension.value.id})},b.goToDetail=function(a){b.selectedRegion={value:_.find(b.regions_options,["id",a+""])},window.location="#/details?id="+a},b.goToCompare=function(a,c){b.selectedRegion={value:_.find(b.regions_options,["id",a+""])},b.selectedVsRegion={value:_.find(b.regions_options,["id",c+""])},window.location="#/compare?id="+a+"&id2="+c},b.hoverMap=function(a){},b.unhoverMap=function(a){},b.romanize=function(a){var b,c={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},d="";for(b in c)for(;a>=c[b];)d+=b,a-=c[b];return d},a.getData().then(g),h()}]),angular.module("ecosistemaEmprendedorRegionesApp").controller("MainCtrl",["$scope","ColorService","$location","$timeout","$rootScope",function(a,b,c,d,e){a.dimension_selected="general",a.$on("newData",function(){d(a.renderChart,500)}),a.$on("dimensionChanged",function(b,c){a.dimension_selected=c.dim,a.data&&a.renderChart()});var f=!1;a.colorScale=b.getThresholdScale(-.001,1.1),a.renderChart=function(){var c=Math.round(d3.select("#lines-container").node().getBoundingClientRect().width);if(a.data){a.chartData=a.prepareData();var d={json:a.chartData,type:"bar",xSort:!1,keys:{x:"name",value:["value"]},color:function(b,c){return void 0!=c.index?a.chartData[c.index].color:void 0},onclick:function(b,c){a.goToDetail(a.chartData[b.index].id)}};f?(f.load(d),f.ygrids([{value:a.avg,text:"Promedio: "+a.avg,position:"start","class":"promedio-line"}])):(f=c3.generate({bindto:"#lines-container",data:d,size:{height:600,width:c},padding:{top:0},axis:{rotated:!0,x:{type:"category"},y:{max:1,min:0,padding:{top:0,bottom:0}}},grid:{y:{lines:[{value:a.avg,text:"Promedio: "+a.avg,position:"start","class":"promedio-line"}]}},legend:{show:!1}}),d3.selectAll(".c3-axis-x .tick").on("mouseenter",function(b,c){a.hoverTick(a.chartData[b].id)}).on("mouseleave",function(b,c){a.unhoverTick(a.chartData[b].id)}).on("click",function(b,c){a.goToDetail(a.chartData[b].id)})),d3.select("g.promedio-line line").style("stroke",a.colorScale(a.avg)).style("stroke-width",3),d3.select("g.promedio-line text").style("fill",a.colorScale(a.avg)),d3.selectAll(".c3-axis-x .tick").attr("id",function(a,b){return"tick-"+a}),b.paintMap(a.chartData)}},a.prepareData=function(){a.sum=0,a.avg=0,a.qty=0;var b=angular.copy(a.data).map(function(b){var c=b[a.dimension_selected];return a.sum+=c,a.qty+=1,a.avg=Math.round(a.sum/a.qty*100)/100,{id:b.region,name:b.nombre,value:parseFloat(c),color:a.colorScale(c)}}).sort(function(a,b){return a.value<b.value?1:-1});return b},a.hoverTick=function(b){a.hoverMap(b)},a.unhoverTick=function(b){a.unhoverMap(b)},d(function(){a.renderChart()},500)}]),angular.module("ecosistemaEmprendedorRegionesApp").controller("DetailsCtrl",["$scope","$routeParams","$location","ColorService","$timeout",function(a,b,c,d,e){a.$on("newData",function(){console.log("newData DETAILS"),e(function(){a.rendered?a.update(b.id):a.init()},500)}),a.$on("regionChanged",function(b,c){a.data&&a.rendered&&a.update(c.id)}),a.rendered=!1,a.chart=!1,a.loadingDetail=!0,a.init=function(){a.data&&!a.rendered&&(a.loadingDetail=!1,a.rendered=!0,a.update(b.id))},a.update=function(b){c.search("id",b),a.id=b,a.current=_.find(a.data,["region",parseInt(b)]),d.selectRegion(a.id);var e=Math.round(d3.select("#radar-chart").node().getBoundingClientRect().width),f=[];angular.forEach(a.current,function(b,c){-1==["region","nombre","ranking","general"].indexOf(c)&&f.push({nombre:a.current.nombre,ix:0,axis:a.dimension_labels[c],description:a.dimension_descriptions[c],value:b})}),Math.round(d3.select("body").node().getBoundingClientRect().width)<700?a.renderLineChart(e,f):a.renderRadarChart(e,f),a.chart=!0};var f,g=d3.scale.ordinal().range(["#ff8303"]);a.renderLineChart=function(b,c){var d={json:_.orderBy(c,["value"],["desc"]),type:"bar",xSort:!1,keys:{x:"axis",value:["value"]},color:g};f?(f.load(d),f.ygrids([{value:a.current.general,text:"Índice general: "+a.current.general,position:"start","class":"promedio-line"}])):f=c3.generate({bindto:"#radar-chart",data:d,size:{height:500,width:b},padding:{top:0},axis:{rotated:!0,x:{type:"category"},y:{max:1,min:0,padding:{top:0,bottom:0}}},grid:{y:{lines:[{value:a.current.general,text:"Índice general: "+a.current.general,position:"start","class":"promedio-line"}]}},legend:{show:!1}}),d3.select("g.promedio-line line").style("stroke",g).style("stroke-width",3),d3.select("g.promedio-line text").style("fill",g)},a.renderRadarChart=function(b,c){a.radarData=[c];var d={top:100,right:150,bottom:100,left:150},e=b,f=d3.scale.ordinal().range(["#ff8303"]),g={w:e-d.right-d.left,h:e-d.right-d.left,margin:d,maxValue:1,levels:10,roundStrokes:!1,color:f,labelFactor:1.2};RadarChart("#radar-chart",a.radarData,g)},a.prev=function(){var b=a.current.region-1;0==b&&(b=15),a.update(b)},a.next=function(){var b=a.current.region+1;16==b&&(b=1),a.update(b)},e(function(){a.init()},500)}]),angular.module("ecosistemaEmprendedorRegionesApp").controller("CompareCtrl",["$scope","$routeParams","$location","ColorService","$timeout",function(a,b,c,d,e){a.$on("newData",function(){console.log("newData COMPARE"),e(function(){a.rendered?a.update(b.id,b.id2):a.init()},500)}),a.$on("regionChanged",function(b,c){a.data&&a.rendered&&a.update(c.id,a.id2)}),a.$on("vsRegionChanged",function(b,c){a.data&&a.rendered&&a.update(a.id1,c.id)}),a.rendered=!1,a.init=function(){a.data&&!a.rendered&&(a.rendered=!0,a.update(b.id,b.id2))},a.update=function(b,e){a.colorest=d3.scale.ordinal().range(["#ff8303","#001d34"]),c.search("id",b),c.search("id2",e),
a.id1=b,a.region1=_.find(a.data,["region",parseInt(b)]),e&&(a.id2=e+"",a.region2=_.find(a.data,["region",parseInt(e)])),d.selectRegion(a.id1,a.id2);var f=[];if(angular.forEach(a.region1,function(b,c){-1==["region","nombre","ranking","general"].indexOf(c)&&f.push({nombre:a.region1.nombre,ix:0,axis:a.dimension_labels[c],description:a.dimension_descriptions[c],value:b})}),a.radarData=[f],a.region2){var g=[];angular.forEach(a.region2,function(b,c){-1==["region","nombre","ranking","general"].indexOf(c)&&g.push({nombre:a.region2.nombre,ix:1,axis:a.dimension_labels[c],description:a.dimension_descriptions[c],value:b})}),a.radarData.push(g)}var h=Math.round(d3.select("#radar-chart").node().getBoundingClientRect().width);Math.round(d3.select("body").node().getBoundingClientRect().width)<700?a.renderLineChart(h,a.radarData):a.renderRadarChart(h,a.radarData)};var f;a.renderLineChart=function(b,c){var d=[a.region1.nombre],e=[{value:a.region1.general,position:"start","class":"promedio-line1"}];a.region2&&(d.push(a.region2.nombre),e.push({value:a.region2.general,position:"start","class":"promedio-line2"}));var g=_.orderBy(c[0].map(function(b,d){return b[a.region1.nombre]=b.value,a.region2&&(b[a.region2.nombre]=c[1][d].value),delete b.value,delete b.nombre,b}),[a.region1.nombre],["desc"]),h={unload:!0,json:g,type:"bar",xSort:!1,keys:{x:"axis",value:d},color:function(b,c){var d=c.id?c.id:c;return d==a.region1.nombre?"#ff8303":"#001d34"}};f?(f.load(h),f.ygrids(e)):f=c3.generate({bindto:"#radar-chart",data:h,size:{height:500,width:b},padding:{top:0},axis:{rotated:!0,x:{type:"category"},y:{max:1,min:0,padding:{top:0,bottom:0}}},grid:{y:{lines:e}},legend:{show:!1}}),d3.select("g.promedio-line1 line").style("stroke","#ff8303").style("stroke-width",2),d3.select("g.promedio-line2 line").style("stroke","#001d34").style("stroke-width",2)},a.renderRadarChart=function(b,c){var d={top:100,right:150,bottom:100,left:150},e=b,f={w:e-d.right-d.left,h:e-d.right-d.left,margin:d,maxValue:1,levels:10,roundStrokes:!1,color:a.colorest,labelFactor:1.2};RadarChart("#radar-chart",a.radarData,f)},e(a.init,500)}]),angular.module("ecosistemaEmprendedorRegionesApp").run(["$templateCache",function(a){"use strict";a.put("views/compare.html",'<div class="col-xs-12"> <div class="row"> <div class="reference-container text-center"> <div class="reference"> <p class="name"><span class="block block-color1"></span><strong>{{region1.nombre}}</strong></p> <p class="rank">#{{region1.ranking}} de 15</p> <p class="index">General: {{region1.general | number : 2}}</p> </div> <div class="reference"> <p class="name"><span class="block block-color2"></span><strong>{{region2.nombre}}</strong></p> <p class="rank">#{{region2.ranking}} de 15</p> <p class="index">General: {{region2.general | number : 2}}</p> </div> </div> </div> <div class="row"> <div id="radar-chart-container" class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-12"> <div id="radar-chart"></div> </div> </div> </div>'),a.put("views/details.html",'<div class="col-xs-12"> <!--div class="row">\n\n		<div id="header-details" class="col-sm-12">\n				<div class="row" id="text-details">\n					<div class="col-md-12">\n						<h2 class="text-center"><span ng-show="current">{{current.nombre}}</span><span ng-hide="current"><small>Cargando...</small></span></h2>\n					</div>\n					<div class="col-sm-4 text-center">\n						<p><strong>Ranking:</strong> <span ng-show="current">#{{current.ranking}} de 15</span></p>\n					</div>\n					<div class="col-sm-4 text-center">\n						<p>Región {{romanize(current.region)}}</p>\n					</div>\n					<div class="col-sm-4 text-center">\n						<p><strong>Índice general:</strong> <span ng-show="current">{{current.general | number : 2}}</span></p>\n					</div>\n\n					<a class="left carousel-control" ng-click="prev()">\n				       <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>\n				       <span class="sr-only">Previous</span>\n				   	</a>\n\n					<a class="right carousel-control" ng-click="next()">\n				       <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>\n				       <span class="sr-only">Previous</span>\n				   	</a>\n				</div>\n\n		</div>\n\n	</div--> <div class="row"> <div id="radar-chart-container" class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-12"> <div id="radar-chart" ng-class="{loading:loadingDetail}"> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="col-xs-12"> <div ng-hide="loading" class="row"> <div class="col-sm-12"> <div id="lines-container"> <!-- Line container --> </div> <p ng-show="!loading" class="help-block up text-center"><i class="glyphicon glyphicon-arrow-up"></i><br>Los indicadores tienen valores entre 0 y 1. La línea vertical indica el valor promedio.</p> </div> </div> </div>')}]);